<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="/styles/index.css"> -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/index.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
    <link rel="stylesheet" href="/static/styles/index.css">
    <script src="/static/js/index.js"></script>
    
    <style>
        input {
            border-radius: 5px;
            color: red;
            width: 200px;
            height: 20px;
        }
    </style>

    <script>
        function loginPage(){
            setTimeout(() => {
                window.location.href = '{{ url_for("show") }}'
            }, 5000);
        }
    </script>

</head>

<body>
    <!-- background="/static/nubelson-fernandes-Y376h7VN27c-unsplash.jpg" -->
    <div class="header-div">
        <header class="new">
            <div>
                <h1>CAREER HUB SIGNUP PAGE</h1>
            </div>
        </header>
    </div>

  <div>
    <div class="signup-forms">
        <form action="/" method="post" enctype="multipart/form-data">
            <label for="first-Name">First Name</label>
            <input type="text" name="first-Name"  id="first-name" placeholder="first name" required><br /><br />
            
            <label for="Second-name">Last Name</label>
            <input type="text" name="second-Name" id="second-name" placeholder="Last name" required><br /><br />

            <label for="name-surName" style="padding-right: none;">surname</label>
            <input type="text" name="name-surName" id="surname" placeholder="surname" required><br /><br />

            <label for="school-attended">Former School Name</label>
            <input type="text" name="school-attended"  id="school-attended" placeholder="former school name" required><br /><br />
        
            <label for="kcse-grade">KCPE grade</label>
            <select name="kcse-grade" id="kcse-grade">   
                <option value="0" selected disabled> grade</option>
                <option value="A">A</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">c+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="D+">D+</option>
                <option value="D">D</option>
                <option value="D-">D-</option>
                <option value="D">D</option>
            </select><br /><br />

            <label for="county">Residence</label>
            <input type="text" name="county" id="residence" placeholder="Residence" required><br /><br />

            <label for="Email1">Email</label>
            <input type="text" name="Email" id="email" placeholder="Email" required><br /><br />

            <label for="password1">Password</label>
            <input type="password" id="password" name="password" placeholder="Password" required><br><br>
            <label for="password1">Comfirm Password</label>
            <input type="password" id="password1" name="password1" placeholder="Password" required><br><br>
            <label for="image">Choose a profile image to upload:</label><br><br>
            <input type="file" id="image" name="image" accept="image/*"><br><br>
            
            <button  type="submit" class="but1" id="submit">Sign Up</button>
            <!-- onclick="sendEmailAndNavigate()" -->
            <!-- onclick="loginPage()" --> 
    </form>
</div>
<div class="b-example-divider"></div>

<div class="container">
  <footer class="row row-cols-1 row-cols-sm-2 row-cols-md-5 py-5 my-5 border-top">
    <div class="col mb-3">
      <a href="/" class="d-flex align-items-center mb-3 link-body-emphasis text-decoration-none">
        <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
      </a>
    </div>

<div class="footer-container">
  <footer class="py-3 my-4" id="footer-cont">
    <ul class="nav justify-content-center border-bottom pb-3 mb-3">
      <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">Home</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">Features</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">Pricing</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">FAQs</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">About</a></li>
    </ul>
    <p class="text-center text-body-secondary">&copy; 2024 Company, Inc</p>
  </footer>
</div>
<!-- <script type="text/javascript" src="/jquery/jquery-3.6.0.min.js"></script> -->

<script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
        import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-database.js";


        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCXrmzmNOaHIsoonCqILsDW1ONA_uXuJWU",
            authDomain: "careerhub-database.firebaseapp.com",
            databaseURL: "https://careerhub-database-default-rtdb.firebaseio.com",
            projectId: "careerhub-database",
            storageBucket: "careerhub-database.appspot.com",
            messagingSenderId: "910229715948",
            appId: "1:910229715948:web:3a42a1a1d0d6210cd99ec9",
            measurementId: "G-9XQVRH5D3J"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // get ref to the database
        const db = getDatabase(app);

        document.getElementById("submit").addEventListener("click", function(e){
            e.preventDefault();
            set(ref(db, 'user/' + document.getElementById("first-name").value),
            {
                firstName: document.getElementById("first-name").value,
                secondName: document.getElementById("second-name").value,
                surname: document.getElementById("surname").value,
                school: document.getElementById("school-attended").value,
                grade: document.getElementById("kcse-grade").value,
                password: document.getElementById("password").value,
                comfirmPassword: document.getElementById("password1").value,
                email: document.getElementById("email").value,
                residence: document.getElementById("residence").value
            });
            
            alert("signup successful");

            document.getElementById("submit").addEventListener("click", function(){
                window.location.href = '{{ url_for("show") }}';
            });
        })
</script>
</body>
</html>